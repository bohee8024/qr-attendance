<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>출석 체크</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>출석 체크</h1>
        </header>

        <!-- 잘못된 접근 -->
        <section class="step-section" id="invalidAccess" style="display: none;">
            <div class="error-box">
                <div class="error-icon">!</div>
                <h2>잘못된 접근입니다</h2>
                <p>QR 코드를 스캔하여 접속해주세요.</p>
                <p class="sub-text">관리자에게 문의하여 QR 코드를 받으세요.</p>
                <button id="backToHome" class="btn btn-secondary">홈으로 돌아가기</button>
            </div>
        </section>

        <!-- 단계 1: 정보 입력 -->
        <section class="step-section" id="step1">
            <div class="step-indicator">
                <span class="step active">1. 정보 입력</span>
                <span class="step">2. 완료</span>
            </div>

            <h2>출석 정보 입력</h2>
            <p class="session-info">세션: <span id="scannedSession"></span></p>

            <div class="form-group">
                <label for="employeeName">이름 *</label>
                <input type="text" id="employeeName" placeholder="이름을 입력하세요" autocomplete="name">
            </div>
            <div class="form-group">
                <label for="vehicleNumber">차량번호 (선택)</label>
                <input type="text" id="vehicleNumber" placeholder="예: 12가 3456">
            </div>

            <div class="button-group">
                <button id="submitAttendance" class="btn btn-success btn-large">출석하기</button>
            </div>

            <!-- 에러 메시지 -->
            <div id="errorMessage" class="error-message" style="display: none;"></div>
        </section>

        <!-- 단계 2: 완료 -->
        <section class="step-section" id="step2" style="display: none;">
            <div class="step-indicator">
                <span class="step completed">1. 정보 입력</span>
                <span class="step active">2. 완료</span>
            </div>

            <div class="success-message">
                <div class="success-icon">✓</div>
                <h2>출석 완료!</h2>
                <p id="completionMessage"></p>
                <p class="session-info">세션: <span id="completionSession"></span></p>
                <p class="close-hint">이 페이지를 닫아도 됩니다</p>
            </div>
        </section>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="student.js"></script>
</body>
</html>
